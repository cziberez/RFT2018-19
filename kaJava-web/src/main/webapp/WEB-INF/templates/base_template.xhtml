<!DOCTYPE html>
<html lang="#{userBean.localeAsString}"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:o="http://omnifaces.org/ui">

<h:head>
    <title>kaJava - <ui:insert name="windowTitle"/></title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
    <link rel="shortcut icon" href="#{request.contextPath}/images/favicon.ico" type="image/x-icon"/>
    <h:outputStylesheet library="css" name="default.css"/>
</h:head>

<ui:insert name="viewparam"/>

<ui:define name="meta">
    <f:metadata>
        <o:enableRestorableView/>
    </f:metadata>
</ui:define>

<h:body>

    <p:notificationBar id="errorNotification" position="top" effect="slide"
                       widgetVar="errorNotificationBar">
        <p:graphicImage onclick="PF('errorNotificationBar').hide(); window.location.reload()"
                        styleClass="ui-icon ui-icon-close" title="Bezár"
                        style="float: right; width: 30px;"/>
        <h2>Hiba történt!</h2>
        <h:outputText
                value="A kiszolgáló a kérés feldolgozása közben nem várt problémába ütközött! A felmerült hibákról bővebb információt az alábbi blokkban olvashat."/>
        <h:messages severity="fatal" id="hibaFatalErrorId"/>
    </p:notificationBar>

    <div id="page-wrapper" style="height: 100%;">
        <p:panel id="page-header" style="max-width: 100%;" stateStoreEnabled="false">
            <ui:include src="menu.xhtml"/>
        </p:panel>

        <ui:insert name="breadcrumb"/>

        <div id="page-content">
            <ui:insert name="content"/>
        </div>
    </div>

    <p:dialog id="aboutDialog" header="#{msg['menu.about']}" widgetVar="aboutDlg" resizable="false"
              appendTo="@(body)" modal="true" closable="false">
        <p:panelGrid columns="2">

        </p:panelGrid>
    </p:dialog>

    <p:sticky target="page-header"/>
    <div id="ajaxStatusIndicator" class="idle"/>
    <p:growl id="growl" sticky="true"
             severity="info, warn, error" showDetail="true">
        <p:autoUpdate disabled="false"/>
    </p:growl>
    <p:ajaxStatus onstart="PF('statusDlg').show();"
                  onsuccess="PF('statusDlg').hide();" onerror="PF('statusDlg').hide();"/>

    <p:dialog widgetVar="statusDlg" showHeader="false" resizable="false"
              styleClass="disable-scroll" modal="true" id="statusDlg">
        <p:panelGrid style="text-align: center; border: none;" styleClass="noborder" columns="1">
            <p:outputLabel value="#{msg['status.pleaseWait']}"/>
            <p:graphicImage value="/images/ajaxloading.gif"/>
        </p:panelGrid>
    </p:dialog>

    <p:dialog widgetVar="requestRefusedDialog" showHeader="false" resizable="false"
              styleClass="disable-scroll" modal="true" id="requestRefusedDlg">
        <h:form id="concurentModificationForm">
            <p:panelGrid style="text-align: center;">
                <p:outputLabel
                        value="A kért művelet egy másik esemény feldolgozása miatt nem hajtható végre. Kérjük próbálja újra."/>
                <p:commandButton value="OK" onclick="PF('requestRefusedDialog').hide()"/>
            </p:panelGrid>
        </h:form>
    </p:dialog>


    <h:form id="baseForm">

        <p:dialog modal="true" resizable="false" responsive="true" minWidth="500" minHeight="400" dynamic="false"
                  widgetVar="langDlg" showEffect="show" hideEffect="hide" closable="false" header="#{msg['langauge']}"
                  visible="#{userBean.checkLangaugeDialogVisibility()}">
            <p:panelGrid id="langSelectImages" styleClass="noborder" columns="2">
                <h:graphicImage value="/images/hunlogo.png" title="#{msg['hungarian']}"/>
                <h:graphicImage value="/images/englogo.png" title="#{msg['english']}"/>
            </p:panelGrid>
            <p:selectOneRadio id="langSelectRadio" value="#{userBean.selectedLang}" layout="responsive" columns="2">
                <f:selectItem itemLabel="#{msg['hungarian']}" itemValue="hu"/>
                <f:selectItem itemLabel="#{msg['english']}" itemValue="en"/>
            </p:selectOneRadio>
            <f:facet name="footer">
                <p:panelGrid>
                    <p:commandButton id="saveLangaugeButton" value="#{msg['select']}" action="#{userBean.saveLocale}"
                                     onsuccess="window.location.reload()"/>
                </p:panelGrid>
            </f:facet>
        </p:dialog>

        <p:confirmDialog global="true" showEffect="show" hideEffect="fade">
            <p:commandButton value="#{msg['true']}" type="button"
                             styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
            <p:commandButton value="#{msg['false']}" type="button"
                             styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
        </p:confirmDialog>

        <p:dialog id="loginDialog" widgetVar="loginDlg" resizable="false" modal="true"
                  header="#{msg['menu.login']}">
            <p:panelGrid id="loginPanel" styleClass="noborder fullSize" columns="2">
                <h:outputLabel value="#{msg['menu.username']}"/>
                <p:inputText/>
                <h:outputLabel value="#{msg['menu.password']}"/>
                <p:password/>
            </p:panelGrid>
            <f:facet name="footer"/>
            <p:panelGrid styleClass="noborder fullSize" columnClasses="halfSize center-position" columns="2">
                <p:commandButton value="#{msg['menu.login']}"/>
                <p:commandButton value="#{msg['cancel']}" onclick="PF('loginDlg').hide()"/>
            </p:panelGrid>
        </p:dialog>

        <p:dialog id="registerDialog" widgetVar="registerDlg" resizable="false" modal="true" header="Register">
            <p:panelGrid id="registerPanel" styleClass="noborder fullSize" columns="2">
                <h:outputLabel value="Username"/>
                <h:outputText value=""
            </p:panelGrid>
        </p:dialog>
    </h:form>
</h:body>
</html>
